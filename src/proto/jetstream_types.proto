package edu.princeton.jetstream;



message NodeID {
  required bytes address = 1;
  required int32 portno = 2;
}


message TaskID {
  required int32 computationID = 1;
  required int32 task = 2;
}

message TaskMeta {
  required string cmd = 1;
  required TaskID id = 2;
  optional NodeID site = 3;
}


message TableMeta {
  required string name = 1;
  required string schema = 2;
  required int32 id = 3;
  optional NodeID site = 4;
}

//Next comes server API things

message Edge {
  required int32 src = 1;
  required int32 dest = 2;
}

message AlterTopo {
  repeated TaskMeta toStart = 1;
  repeated TableMeta toCreate = 2;
  repeated TaskID taskToStop = 3; 
  repeated string tableToStop = 4; 
  repeated Edge edges = 5;
}