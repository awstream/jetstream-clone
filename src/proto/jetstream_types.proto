package edu.princeton.jetstream;

message NodeID {
  required bytes address = 1;
  required int32 portno = 2;
}

message TaskID {
  required int32 computationID = 1;
  required int32 task = 2;
}

message TaskMeta {
  required string cmd = 1;
  required TaskID id = 2;
  optional NodeID site = 3;
}

message TableName {
  required string name = 1;
  required int32 id = 2;
}

message TableMeta {
  required TableName name = 1;
  required string schema = 2;
  optional NodeID site = 3;
}

message Edge {
  required int32 src = 1;
  required int32 dest = 2;
}

message Table {
  enum Type {BYTES = 1; STRING = 2; INT32 = 3;}
  required Type type = 1;

  optional TableMeta meta = 2;
  repeated bytes bytesData = 3;
  repeated string stringData = 4;
  repeated int32 int32Data = 5 [packed=true];
}

message Cube {
  repeated Table tables = 1;
}
